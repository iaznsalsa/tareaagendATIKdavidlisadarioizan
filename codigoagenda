import csv

import os


ARCHIVO = 'agenda.csv'


def inicializar_archivo():

	if not os.path.exists(ARCHIVO):

Â Â Â Â 	with open(ARCHIVO, 'w', newline='') as f:

Â Â Â Â Â Â Â Â 	writer = csv.writer(f)

Â Â Â Â Â Â Â Â 	writer.writerow(['Nombre', 'TelÃ©fono', 'Email'])


def leer_contactos():

	with open(ARCHIVO, 'r') as f:

Â Â Â Â 	reader = csv.DictReader(f)

Â Â Â Â 	return list(reader)


def escribir_contacto(nombre, telefono, email):

	with open(ARCHIVO, 'a', newline='') as f:

Â Â Â Â 	writer = csv.writer(f)

Â Â Â Â 	writer.writerow([nombre, telefono, email])


def sobreescribir_contactos(contactos):

	with open(ARCHIVO, 'w', newline='') as f:

Â Â Â Â 	writer = csv.DictWriter(f, fieldnames=['Nombre', 'TelÃ©fono', 'Email'])

Â Â Â Â 	writer.writeheader()

Â Â Â Â 	writer.writerows(contactos)

def aÃ±adir_contacto():
	nombre = input("Nombre: ")
	telefono = input("TelÃ©fono: ")
	email = input("Email: ")
	escribir_contacto(nombre, telefono, email)
	print("âœ… Contacto aÃ±adido.")

def mostrar_contactos():
	contactos = leer_contactos()
	for c in contactos:
    	print(f"{c['Nombre']} - {c['TelÃ©fono']} - {c['Email']}")

def buscar_contacto():
	nombre = input("Nombre a buscar: ")
	encontrados = [c for c in leer_contactos() if nombre.lower() in c['Nombre'].lower()]
	if encontrados:
    	for c in encontrados:
        	print(f"{c['Nombre']} - {c['TelÃ©fono']} - {c['Email']}")
	else:
    	print("âŒ No se encontrÃ³ el contacto.")

def eliminar_contacto():
	nombre = input("Nombre del contacto a eliminar: ")
	contactos = leer_contactos()
	nuevos = [c for c in contactos if c['Nombre'].lower() != nombre.lower()]
	if len(nuevos) < len(contactos):
    	sobreescribir_contactos(nuevos)
    	print("ğŸ—‘ï¸ Contacto eliminado.")
	else:
    	print("âŒ Contacto no encontrado.")

# --- Programa principal ---
def main():
    inicializar_archivo()
    mostrar_menu()

if __name__ == "__main__":
    main()

# --- MenÃº de usuario ---

from contactos import aÃ±adir_contacto, mostrar_contactos, buscar_contacto, eliminar_contacto

def mostrar_menu():
	while True:
    	print("\n AGENDA DE CONTACTOS ")
    	print("1. AÃ±adir contacto")
    	print("2. Mostrar contactos")
    	print("3. Buscar contacto")
    	print("4. Eliminar contacto")
    	print("5. Salir")
    	opcion = input("Elige una opciÃ³n: ")

    	if opcion == '1':
        	aÃ±adir_contacto()
    	elif opcion == '2':
        	mostrar_contactos()
    	elif opcion == '3':
        	buscar_contacto()
    	elif opcion == '4':
        	eliminar_contacto()
    	elif opcion == '5':
        	print("Saliendo...")
        	break
    	else:
        	print(" OpciÃ³n no vÃ¡lida.")
